[["index.html", "AnVIL Instructor Guide About this Book", " AnVIL Instructor Guide May 06, 2025 About this Book This book is a guide to help instructors who are new to AnVIL. It helps these users set up their accounts and start developing content on the AnVIL platform. This book is part of a series of books for the Genomic Data Science Analysis, Visualization, and Informatics Lab-space (AnVIL) of the National Human Genome Research Institute (NHGRI). Skills Level Please choose the closest matching persona from the left-hand menu. Genetics Novice: no genetics knowledge needed Programming skills Novice: no programming experience needed AnVIL Collection Additional guides are provided to help you with Workspaces, launch interactive tools, and start working with data. Learn more about AnVIL by visiting https://anvilproject.org or reading the article in Cell Genomics. Please check out our full collection of AnVIL and related resources: https://hutchdatascience.org/AnVIL_Collection/ "],["introduction.html", "Chapter 1 Introduction 1.1 What Is AnVIL? 1.2 Does AnVIL Cost Money? 1.3 Where Can I Get Help? 1.4 Activate scroll_highlight Feature 1.5 Why should I use AnVIL? 1.6 Overview 1.7 Goals for This Guide 1.8 Design Philosophy", " Chapter 1 Introduction 1.1 What Is AnVIL? AnVIL is NHGRI’s Genomic Data Science Analysis, Visualization, and Informatics Lab-Space. It provides a platform for performing genomic data analysis on the cloud. 1.2 Does AnVIL Cost Money? Through AnVIL, you pay for computing resources as you use them. If you’d like to try it out, new users can claim a $300 Google Cloud credit to test out the platform and perform some small analyses. We also provide a cost estimator. 1.3 Where Can I Get Help? Please visit our community support forum at help.anvilproject.org with any questions (or suggestions!) you may have. You can also visit the Getting Started Guide and anvilproject.org/learn for additional resources. 1.4 Activate scroll_highlight Feature Note that some sections of this book cover steps in a lot of detail. When navigating the table of contents, you can click subsection (e.g., 2.2, 4.2) headers a second time to expand the table of contents and enable the scroll_highlight feature. This can help you follow the separate steps within more clearly. 1.5 Why should I use AnVIL? You may be wondering if AnVIL is a good choice for your class. We feel the answer is an unequivocal YES! AnVIL provides all the advantages of a cloud computing environment: Version control: All students will be using the exact same versions of programs, running on the exact same operating system, and the majority of setup can be handled for the students ahead of time. This greatly reduces time spent on setup and prevents unexpected run errors during the activities, limiting the amount of troubleshooting you have to do. As a result, classes and activities will run more smoothly and predictably. Inclusivity: Cloud-computing enables all students to participate in the activity without needing to provide computers with certain specifications. Experience: Cloud-computing is becoming common in today’s bioinformatics workplaces, and the classroom is a low-stress and low-stakes opportunity for students to gain experience. AnVIL is purpose-built for genomic data science: Tools: Through AnVIL, students can access a wide range of tools (Galaxy, RStudio/Bioconductor, Jupyter, as well as scripted workflows) all in one place, and can easily transition between them. Datasets: AnVIL provides a large and growing collection of relevant datasets with standardized organization, for easier importing and processing. Authenticity: On AnVIL, students will be working in the same environment as scientists carrying out cutting edge research. 1.6 Overview This book is targeted towards people who are teaching a course or workshop on AnVIL. You will find here: Introduction – Design philosophy and goals for this guide - is this a good fit for your class? What should you know before you start? Instructor Setup – Step-by-step instructions to create your first accounts on AnVIL Content Preparation – Instructions on using premade content, along with additional tools to help you customize or create your own class Workspace Running the Class – Step-by-step instructions to help you add students into a class on AnVIL, along with best practices for shutting down your course cleanly and minimizing costs Cost Management – Explanations of the types of costs you and your students may incur, along with advice on how to minimize them. Student Instructions – Step-by-step instructions for students using AnVIL in your class, to guide them through common tasks. 1.7 Goals for This Guide 1.8 Design Philosophy This guide provides an opinionated walkthrough on how to set up AnVIL for your class. These step-by-step instructions take instructors that are completely new to the AnVIL through account setup to the point where you can feel comfortable hosting a class from start-to-finish on AnVIL. Following the recommendations in this guide will help you minimize expenses, develop content programmatically, track individual student expenses, and stop billing expenses from accruing once the class is complete. In support of these goals we have made the following design decisions: ACCOUNT SETUP Sign up for a personal Google Cloud Account, where you can get started by claiming $300 free Google credits. CONTENT DEVELOPING Include version control and visibility of course content by using GitHub. This will allow you to add content programmatically, keep track of changes, and share your content with others outside of AnVIL. CLASS SETUP Create a separate Terra Billing Project for each class. This will allow you to easily shut down expenses at the end of the class. Choose one funding source per class (for example, the STRIDES Program). "],["overview-1.html", "Chapter 2 Overview 2.1 What do I need to do?", " Chapter 2 Overview The setup instructions are presented in two parts: Instructor Setup (this section): covers everything needed to set up yourself and any co-instructors or TAs to work on AnVIL. Depending on your team and funding, you may only need to do these steps once (and then make updates on an as-needed basis for changes in team members or funding). Running the Class: covers how to grant your students access to AnVIL. These steps will need to be repeated for each new offering of the course. 2.1 What do I need to do? You may not need to do everything in the instructor setup section! This section contains instructions for setting up billing from scratch. If your funding is being managed by a third party (e.g. through a funding mechanism such as STRIDES or through your institution) you can skip some steps. The table below provides guidance on which steps you will need to complete: Task Self-managed Funding 3rd-party Funding Create Google Account Yes Yes Set up Google Billing Yes Probably No (ask your funding manager) Create Instructor/TA Group Only if you have co-instructors or TAs Only if you have co-instructors or TAs Set up Terra Billing Projects Yes Probably Yes (ask your funding manager) "],["instructor-google-account.html", "Chapter 3 Create Google account 3.1 Create a Google Account 3.2 Sign in to Terra", " Chapter 3 Create Google account AnVIL uses Terra to run analyses. Terra operates on Google Cloud Platform, so you’ll pay for all storage and analysis costs through a Google account linked to Terra. The costs are the standard Google Cloud Platform fees for storing and moving data as well as executing an analysis. These costs are passed along through Terra without any markup. 3.1 Create a Google Account Terra operates on Google Cloud Platform, so you will need a (free) Google account which will allow you to access the Terra platform to manage students and in-class analyses. Your Google account will also (1) allow you to manage billing yourself or (2) allow a Program Manager to do so on your behalf. If you do not already have a Google account that you would like to use for accessing Terra, create one now. If you would like to create a Google account that is associated with your non-Gmail, institutional email address, follow these instructions. 3.2 Sign in to Terra You need to sign into Terra to establish your account so that it can be given access to resources and compute on AnVIL. Launch Terra, and you should be prompted to sign in with your Google account. You can always access Terra by going to anvil.terra.bio, or by clicking the link on the AnVIL home page. "],["google-billing-account.html", "Chapter 4 Set up Google Billing 4.1 Before You Start 4.2 Google Billing Account 4.3 Add Terra to Google Billing Account", " Chapter 4 Set up Google Billing Google Billing Accounts are how you pay Google for you and your students’ cloud costs. Depending on how you are being funded, this may be taken care of for you. If your funding is being managed by a third party (e.g. through a funding mechanism such as STRIDES, or through your institution), contact them to determine whether you need to do any billing administration through Google. If not, you can proceed directly to create Instructor Group. If you are new to AnVIL, we strongly recommend seeking funding through NHGRI / STRIDES for teaching your course. In order to prevent abuse, Google sets certain limits on cloud resources available to new users that can complicate teaching (e.g. project quotas). As you or your institution builds a payment history with Google, the limits on your accounts will be relaxed. In the meantime, STRIDES funding can help ensure your initial classes run smoothly. What is STRIDES? NHGRI’s strategic vision highlights the importance of training the next generation of genomic scientists. In collaboration with the NIH Office of Data Science Strategy, NHGRI makes funding available to AnVIL users through the STRIDES program, which aims to promote biological research in cloud environments. To inquire about funding your class on AnVIL, please contact help@lists.anvilproject.org. If you are using a third party funding mechanism but you would like to get started exploring AnVIL right away, you can optionally follow the instructions below to activate Google’s free credits. These should be sufficient for you to experiment with a few exercises yourself and learn how AnVIL works, while you work on getting funding set up for your class. 4.1 Before You Start If you are managing your own billing, you will need a credit card or bank account to get started. Google provides a free trial for first-time users, but payment information is still needed for verification purposes. Don’t worry! If using the free trial, you won’t be billed until you explicitly turn on automatic billing. Before setting up billing yourself, you may want to check with your institutional procurement office and see if they have a preferred account set-up method with Google (such as a third party reseller or an existing account). 4.2 Google Billing Account AnVIL operates on Google Cloud Platform, and does not charge any markup. Rather than paying Terra or AnVIL, users set up billing directly with Google Cloud Platform. Make sure to use the same Google account ID you use to log into Terra for Google Cloud Billing. To set up billing, you must first create a Google “Billing Account”. Tip: You can create multiple Billing Accounts associated with your Google ID. A single Billing Account can fund multiple courses, sections, or iterations of a course, as long as they have a common funding source. But, if courses are funded separately, we recommend creating separate Billing Accounts 4.2.1 Create a Google Billing Account Log in to the Google Cloud Platform console using your Google ID. Make sure to use the same Google account ID you use to log into Terra. If you are a first time user, don’t forget to claim your free credits! If you haven’t been to the console before, once you accept the Terms of Service you will be greeted with an invitation to “Try for Free.” Follow the instructions to sign up for a Billing Account and get your credits. Choose “Individual Account”. This “billing account” is just for managing billing, so you don’t need to be able to add your team members. You will need to give either a credit card or bank account for security. Don’t worry! You won’t be billed until you explicitly turn on automatic billing. You can view and edit your new Billing Account, by selecting “Billing” from the left-hand menu, or going directly to the billing console console.cloud.google.com/billing Clicking on the Billing Account name will allow you to manage the account, including accessing reports, setting alerts, and managing payments and billing. At any point, you can create additional Billing Accounts using the Create Account button. We generally recommend creating a new Billing Account for each funding source. 4.2.2 Add Users or Viewers (optional) If you have a finance administrator who needs access to a Billing Account, you can add them with a few different levels of permissions. Generally the most useful are: Users have a great deal of power over spending - they can create new “Billing Projects” and control who can spend money on those projects. If you have an accounts manager responsible for expenses, it may make sense to add them as a Billing Account User. If you wish to retain full control over who can spend money, you should not add any Users. Viewers can see the activity in the Billing Account but can’t make any changes. This can be useful for finance staff who need access to the reports, or for anyone who needs to monitor spending. Anyone you wish to add to the Billing Account will need their own Google ID. To add a member to a Billing Project: Log in to the Google Cloud Platform console using your Google ID. Navigate to Billing You may be automatically directed to view a specific Billing Account. If you see information about a single account rather than a list of your Billing Accounts, you can get back to the list by clicking “Manage Billing Accounts” from the drop-down menu. Check the box next to the Billing Account you wish to add a member to, click “ADD MEMBER”. Enter their Google ID in the text box. In the drop-down menu, mouse over Billing, then choose the appropriate role. Click “SAVE”. 4.3 Add Terra to Google Billing Account This gives Terra permission to create projects and send charges to the Google Billing Account, and must be done by an administrator of the Google Billing Account. Terra needs to be added as a “Billing Account User”: Log in to the Google Cloud Platform console using your Google ID. Navigate to Billing You may be automatically directed to view a specific Billing Account. If you see information about a single account rather than a list of your Billing Accounts, you can get back to the list by clicking “Manage Billing Accounts” from the drop-down menu. Check the box next to the Billing Account you wish to add Terra to, click “ADD MEMBER”. Enter terra-billing@terra.bio in the text box. In the drop-down menu, mouse over Billing, then choose “Billing Account User”. Click “SAVE”. "],["instructor-group.html", "Chapter 5 Create Instructor Group 5.1 Create Terra Group 5.2 Add Instructors and TAs to Group", " Chapter 5 Create Instructor Group Groups enable you to share AnVIL resources and manage permissions for many people at once. If you have co-instructors or TAs who will be teaching with you, we recommend setting up an “instructor” Group where you can share materials under development and any other resources that are not meant to be shared with students. If you are teaching by yourself, you can proceed directly to Terra Billing Projects. Depending on your needs, you may want to Create a single Group that persists across course offerings. This is convenient if the same people will be teaching the course multiple times; you will not have to re-share resources each time. Create a new Group for each offering of the course. This can be useful if you have different TAs for every offering and you don’t want them to access materials and funding for past and future offerings. You can always add/remove Groups and Group members later, so we recommend starting out with a single instructor group. You can decide later if you want to create a new Group for the next course. Choose an informative, unique Group name. We suggest a combination of institution-class-role (e.g., jhu-bio101-instructors). Only letters, numbers, underscores, and dashes are allowed in Group names. 5.1 Create Terra Group To create a Group: Launch Terra and sign in with your Google account. In the drop-down menu on the left, navigate to “Groups”. Click the triple bar in the top left corner to access the menu. Click the arrow next to your name to expand the menu, then click “Groups”. You can also navigate there directly with this link: https://anvil.terra.bio/#groups Click “+ Create a New Group” Enter a name for your group. Names must be unique, so it’s often helpful to include your team’s name, the purpose of the group, and optionally the timeframe, if you will have similar groups in the future. Click “CREATE GROUP” Your new Group should now show up on the Group Management screen. Take note of the email address associated with your group. You will use this email to grant the group access to Billing Projects and Workspaces. You now have a unique instructor Group. 5.2 Add Instructors and TAs to Group Now that your instructor Group has been created, you should add any additional instructors and TAs. You should also ensure that they have the correct permissions. Users can be added to a Group as either Admins or Members. Admins can add and remove members from the group. Group roles only affect whether or not someone can add and remove members from the Group. They do not grant special privileges with respect to Terra resources (Billing Projects and Workspaces). However, an Admin for the Group can indirectly grant access to Terra resources. By adding someone to the Group, they grant that person access to any Terra resources that the Group has been given permission to access. Often it’s appropriate to add any co-instructors as Admins, with TAs as Members. To add someone to your group: Launch Terra and sign in with your Google account. In the drop-down menu on the left, navigate to “Groups”. Click the triple bar in the top left corner to access the menu. Click the arrow next to your name to expand the menu, then click “Groups”. You can also navigate there directly with this link: https://anvil.terra.bio/#groups Find the name of the Group you want to add someone to, and confirm that you have Admin privileges for the Group (you can only add and remove members to a Group if you are an Admin). Click on the name of the Group to view and manage members. Click on “+ Add User”. You will be prompted to enter the user’s AnVIL ID. Type in the user’s email address. Make sure this is the account that they will be using to access AnVIL. If this member will need to add and remove other members of the Group, check the box for “Can manage members (admin)”. This will add them as an “Admin” for the Group. Otherwise leave it unchecked, and they will be added as a “Member”. Admins and Members have equal access to any resources shared with the Group. Admins can manage Group membership - they can add, remove, or change the role of other Group members. Click ADD USER. This will take you back to the Group administration page. The new Group member will now be shown in the list of group members, along with their role. They should now have access to anything that the Group has been given access to. If you need to remove members or modify their roles, you can do so at any time by clicking the teardrop button next to their name. "],["terra-billing-projects.html", "Chapter 6 Set up Terra Billing Projects 6.1 Create Terra Billing Projects 6.2 Add Instructors to Billing Project", " Chapter 6 Set up Terra Billing Projects Terra Billing Projects are how you grant people (including yourself!) permission to compute on AnVIL. By adding someone to your Billing Project, you enable them to use your funding to carry out activities on AnVIL. Depending on how you are being funded, this may be taken care of for you. If your funding is being managed by a third party (e.g. through a funding mechanism such as STRIDES, or through your institution), contact them to determine whether you should create Terra Billing Projects yourself. The first set of instructions below walk you through creating a Terra Billing Project. If someone else has provided a billing project, you can skip down to adding instructors to Billing Project. 6.1 Create Terra Billing Projects To create a Billing Project, you need access to a Google Billing Account. If you set up Google Billing yourself, you’re good to go! Just make sure to use the same Google Account when logging in to Terra. If a third party is handling Google Billing, you likely do not need to log in to Google Billing yourself; you should be able to follow the instructions below to create a Billing Project within Terra. If you run into trouble, check with your funding manager to confirm: They have set up a Google Billing Account They have added you to the Account as a “User” (or higher) You are using the correct Google ID (i.e. email address) to log in to Terra They have not already created a Billing Project for you It’s often beneficial to set up two separate Billing Projects for a course: Instructor/TA - used to fund development and testing of the material. It can persist for multiple sessions of the course. Student - funds all student activity, and is deactivated at the end of the course activities. Having separate Billing Projects is not required, but can make management easier, particularly when it comes to shutting things down. Note: Terra Billing Projects need unique names. One option is to use a combination of institution-class-term (e.g. jhu-bio101-2022SP). To create a Terra Billing Project: Launch Terra and sign in with your Google account. If this is your first time logging in to Terra, you will need to accept the Terms of Service. In the drop-down menu on the left, navigate to “Billing”. Click the triple bar in the top left corner to access the menu. Click the arrow next to your name to expand the menu, then click “Billing”. You can also navigate there directly with this link: https://anvil.terra.bio/#billing On the Billing page, click the “+ CREATE” button to create a new Billing Project. Select GCP Billing Project (Google’s Platform). If prompted, select the Google account to use and give Terra permission to manage Google Cloud Platform billing accounts. Enter a unique name for your Terra Billing Project and select the appropriate Google Billing Account. The name of the Terra Billing Project must: Only contain lowercase letters, numbers and hyphens Start with a lowercase letter Not end with a hyphen Be between 6 and 30 characters Select the Google Billing Account to use. All activities conducted under your new Terra Billing Project will charge to this Google Billing Account. If prompted, give Terra permission to manage Google Cloud Platform billing accounts. Click “Create”. Your new Billing Project should now show up in the list of Billing Projects Owned by You. You can add additional members or can modify or deactivate the Billing Project at any time by clicking on its name in this list. The page doesn’t always update as soon as the Billing Project is created. If it’s been a couple of minutes and you don’t see a change, try refreshing the page. 6.2 Add Instructors to Billing Project Adding someone to a Billing Project enables them to compute on AnVIL, funded by the Billing Project. To add members to a Billing Project, you must be an “Owner” of the Billing Project. If you created the Billing Project yourself, you’re good to go! If a third party created the Billing Project, check to see whether you are an Owner or a User. If you are not an Owner, you will need to contact your funding manager. They can either make you an Owner, or can add other team members to the Billing Project themselves. You can add individual users to a Billing Project, or you can add a Terra Group, which will enable everyone in the Group to charge to the Billing Project. To add an individual user, you will need to know the email address they will be using to access AnVIL. To add a Group, you will need the email address associated with the Group. 6.2.1 Find Group email If you want to add a Terra Group (such as your “instructor” Group) to your Billing Project, you can find the Group email address on the Group Management page: Launch Terra and sign in with your Google account. In the drop-down menu on the left, navigate to “Groups”. Click the triple bar in the top left corner to access the menu. Click the arrow next to your name to expand the menu, then click “Groups”. You can also navigate there directly with this link: https://anvil.terra.bio/#groups Find the name of the Group, then look in the “Group Email” column to find the email address associated with the Group. Copy this email address and paste it in as the username when adding people to Billing Projects and Workspaces. This will grant everyone in the Group access to the Billing Project or Workspace. Now that you have the Group email address, you can add the group to your Billing Project. 6.2.2 Add members to Billing Project Users can be added to a Billing Project as either Owners or Users. Owners can add and remove users from the Billing Project (including other Owners!). This means Billing Project Owners have a great deal of power over how money can be spent. It’s often a good idea to have at least one other Owner of a Billing Project in order to avoid getting locked out, in case the original Owner leaves or loses access to their account. But you should exercise caution when selecting Billing Project Owners. When teaching with a team, it may make sense to add only those most comfortable with Terra and/or most involved in Terra administration as Owners, and to add everyone else as Users. This can be done by adding the Owners individually as Owners, and then adding the Instructor Group as User. Launch Terra and sign in with your Google account. In the drop-down menu on the left, navigate to “Billing”. Click the triple bar in the top left corner to access the menu. Click the arrow next to your name to expand the menu, then click “Billing”. You can also navigate there directly with this link: https://anvil.terra.bio/#billing Click “Owned by You” and find the Billing Project. If you do not see the Billing Project in this list, then you are not an Owner and do not have permission to add members. Click on the name of the Billing Project. Click on the “Members” tab to view and manage members. Then click the “Add User” button. Enter the email address of the user or group you’d like to add the the Billing Project. If adding an individual, make sure to enter the account that they use to access AnVIL. If adding a Terra Group, use the Group email address, which can be found on the Terra Group management page. If this user or group will need to add and remove other users of the Billing Project, check the Owner box. Otherwise leave it unchecked. It’s often a good idea to have at least one other Owner of a Billing Project in order to avoid getting locked out, in case the original owner leaves or loses access to their account. Click “ADD USER”. You should now see the user or group listed in the Billing Project members, along with the appropriate role. They should now be able to use the Billing Project to fund work on AnVIL. If you need to remove members or modify their roles, you can do so at any time by clicking the teardrop button next to their name. "],["wrap-up.html", "Chapter 7 Wrap-up", " Chapter 7 Wrap-up Congratulations! You have successfully set up AnVIL for your teaching team! You and your team members should be free to develop and test content, funded by your Billing Project. Check out the Content Preparation section for more information about how to use or develop content on AnVIL. When you’re ready to set things up for your students Running the Class has instructions on getting everything set up to teach your course or workshop Student Instructions has student-facing instructions that you can share with your students so they can sign up for an AnVIL account and access any necessary resources "],["using-premade-content.html", "Chapter 8 Using premade content 8.1 Before You Start 8.2 Cloning the workspace", " Chapter 8 Using premade content This chapter will help you get started with the premade class activities available through AnVIL. Activities currently available are listed on the home page of this guide. Notify Terra Contacting Terra ahead of your class time helps the Terra team avoid any major disruptions to your class. Contact Terra by submitting a request for a hold on scheduled maintenance and downtime. It’s also a good idea to ask about major changes planned for the time prior to your class. 8.1 Before You Start You need to set up Billing. This includes your Google Billing Account and Terra Billing Project. Take note of your Terra Billing Project name. If you are running one of the activities that uses RStudio, you should launch RStudio using the Community-Maintained RStudio Environment. This requires you to be familiar with RStudio on AnVIL. Notify Terra. Contacting Terra ahead of your class time helps the Terra team avoid any major disruptions to your class. Contact Terra by submitting a request for a hold on scheduled maintenance and downtime. It’s also a good idea to ask about major changes planned for the time prior to your class. 8.2 Cloning the workspace Workspaces are the building blocks of projects in Terra. Inside a Workspace, you can run analyses, launch interactive tools like RStudio and Galaxy, store data, and share results. Cloning the workspace associated with one of the premade AnVIL activities gives you access to all the necessary data. When cloning, AnVIL makes a copy of notebooks and code for you to modify. Data however, is linked back to the original Workspace through Data Tables, which saves space! The video below gives a brief introduction to the parts of a Workspace. Launch Terra Locate the Workspace you want to clone. If a Workspace has been shared with you ahead of time, it will appear in “MY WORKSPACES”. You can clone a Workspace that was shared with you to perform your own analyses. In the screenshot below, no Workspaces have been shared. If a Workspace hasn’t been shared with you, navigate to the “FEATURED” or “PUBLIC” Workspace tabs. Use the search box to find the Workspace you want to clone. Click the teardrop button on the far right next to the Workspace you want to clone. Click “Clone”. You can also clone the Workspace from the Workspace Dashboard instead of the search results. You will see a popup box appear. Name your Workspace and select the appropriate Terra Billing Project. All activity in the Workspace will be charged to this Billing Project (regardless of who conducted it). Remember that each Workspace should have its own Billing Project. If you are working with protected data, you can set the Authorization Domain to limit who can be added to your Workspace. Note that the Authorization Domain cannot be changed after the Workspace is created (i.e. there is no way to make this Workspace shareable with a larger audience in the future). Workspaces by default are only visible to people you specifically share them with. Authorization domains add an extra layer of enforcement over privacy, but by nature make sharing more complicated. We recommend using Authorization Domains in cases where it is extremely important and/or legally required that the data be kept private (e.g. protected patient data, industry data). For data you would merely prefer not be shared with the world, we recommend relying on standard Workspace sharing permissions rather than Authorization Domains, as Authorization Domains can make future collaborations, publications, or other sharing complicated. Click “CLONE WORKSPACE”. The new Workspace should now show up under your Workspaces. "],["developing-your-own-content.html", "Chapter 9 Developing your own content 9.1 Set Up AnVILPublish on AnVIL 9.2 Create Workspace Structure 9.3 Set Workspace permissions 9.4 Update Dashboard 9.5 Post Jupyter Notebook 9.6 Push Changes to GitHub", " Chapter 9 Developing your own content This chapter will show you how to publish a Workspace on AnVIL using RStudio. Publishing Workspaces programmatically makes it easier to incorporate version control (e.g., using git) and ensures that all of your notebook files end up in the Workspace. Much of the information in this section comes from the AnVILPublish vignette, which can serve as an additional reference. Notify Terra Contacting Terra ahead of your class time helps the Terra team avoid any major disruptions to your class. Contact Terra by submitting a request for a hold on scheduled maintenance and downtime. It’s also a good idea to ask about major changes planned for the time prior to your class. 9.0.1 Before You Start You need to set up Billing. This includes your Google Billing Account and Terra Billing Project. Take note of your Terra Billing Project name. Create your first Workspace. A first Workspace is needed to launch RStudio, but after that, all Workspaces can be made programmatically from within other Workspaces. Launch RStudio using the Community-Maintained RStudio Environment. This requires you to be familiar with RStudio on AnVIL. 9.1 Set Up AnVILPublish on AnVIL 9.1.1 Install AnVILPublish Install AnVIL and AnVILPublish. Don’t worry about loading it for now. Tip: hover over the top-right corner of the box below to copy the code. BiocManager::install(&quot;AnVIL&quot;) AnVIL::install(&quot;AnVILPublish&quot;) 9.1.2 Install notedown Next, navigate to the RStudio Terminal and install notedown using pip3. This module converts markdown documents into .ipynb notebooks. pip3 install notedown Return to the RStudio Console. RStudio doesn’t automatically know where to look for notedown. Add the notedown installation to your RStudio PATH: # Add to PATH existing_path &lt;- Sys.getenv(&quot;PATH&quot;) notedown_path &lt;- &quot;/home/rstudio/.local/bin&quot; Sys.setenv(PATH = paste(existing_path, notedown_path, sep = &quot;:&quot;)) Confirm that notedown is ready to use: # Confirm notedown is accessible system2(&quot;notedown&quot;, &quot;--version&quot;) You should see the version number printed to the console: 9.2 Create Workspace Structure 9.2.1 Identify Your Repository You need a folder with content to get started. In the next step, this will be the basic structure of your files: AnVILPublishSkeleton |-DESCRIPTION |-LICENSE.md |-NAMESPACE |-README.md |-vignettes |-Notebook_1.Rmd “AnVILPublishSkeleton” is the name of the folder containing all of your information. The folder must contain a DESCRIPTION file, NAMESPACE file, and a vignettes directory with at least one .Rmd file. As you develop content, you might end up with many .Rmd notebooks inside the vignettes directory. We will practice with a basic set of files that are already set up for you on GitHub. First, you should clone the skeleton repository. git clone https://github.com/avahoffman/AnVILPublishSkeleton You’ll notice it contains a DESCRIPTION file, NAMESPACE file, and a vignettes directory with an .Rmd file. 9.2.2 Changing the DESCRIPTION File Edit the information in DESCRIPTION but keep the structure the same. Package: argument: This “package name” must match the name of the folder containing the DESCRIPTION and other files. In this case, it should be “AnVILPublishSkeleton”. Title: argument: This will become the header for your Workspace’s Dashboard. Authors@R: argument: Your author information and roles. At minimum, you should include a first name, family name, a role, and an email. You can add additional authors and roles as needed. See a more detailed guide to package metadata here. The most common roles are creator (cre), author (aut), and contributor (ctb), but there are many more to choose from if none of these fit the bill. Authors@R: person(given = &quot;Firstname&quot;, family = &quot;Lastname&quot;, role = &quot;cre&quot;, email = &quot;firstnamelastname@gmail.com&quot;) Description: argument: A several-sentence description of the project. 9.2.3 Changing Other Files Do not edit the NAMESPACE file. The README.md file and .Rmd file(s) will be discussed in more detail in Update Dashboard. 9.2.4 Create the Workspace Use the AnVILPublish::as_workspace() function. Replace &lt;billing-project&gt; with the appropriate Terra Billing Project of your choosing. Replace &lt;My-Workspace&gt; with the Workspace name of your choosing. AnVILPublish::as_workspace( path = &quot;/home/rstudio/AnVILPublishSkeleton&quot;, # directory containing DESCRIPTION file namespace = &quot;&lt;billing-project&gt;&quot;, # Billing project name = &quot;&lt;My-Workspace&gt;&quot;, # Actual Workspace name create = TRUE # Makes a *new* Workspace ) You will see output in the console as the function converts the .Rmd to .md. You might get some warning messages, but make sure that the Workspace was created without error: You should now see this new Workspace at https://anvil.terra.bio/#workspaces. 9.3 Set Workspace permissions Finally, you will want to set up permissions for co-instructors and students to see the class Workspace you created with the development Billing Project in Developing Content. AnVIL users can take on the “Owner”, “Writer”, or “Reader” role for a Workspace. 9.3.1 Add Instructors as “Owner” You should add your co-instructors and teaching assistants as “Owners” to the class Workspace. This is useful if they need to edit the course content or share the space with students on your behalf. To share and change permissions: Go to https://anvil.terra.bio/#workspaces and find your class Workspace you set up in Developing Content Click the teardrop button for your class Workspace Click “Share”. This will open a dialog box. Enter the name of the instructor Group (e.g., jhu-bmr2021-instructors). This will create a dropdown for the Group permissions in the box. Select this Group. Change permissions to “Owner” using the dropdown menu under the instructor Group Click “SAVE” This step makes it so that co-instructors can edit the original content of the Workspace as needed. While this means you and co-instructors can compute using the development Billing Project, this makes spending difficult to track. Instructors should instead clone the Workspace using the instructor Billing Project. This makes it much easier to track costs associated with this iteration of your class versus further iterations (e.g., the following semester or year). 9.3.2 Add Students as “Reader” Next, add your students as “Readers” to the class Workspace. This means they will be able to view and clone the Workspace, but not make edits or perform computations. To share the Workspace: Click the teardrop button for your class Workspace Click “Share”. This will open a dialog box. Enter the name of the student Group. This will create a dropdown for the Group permissions in the box. Select this Group. Ensure permissions are set to “Reader” (default) Click “SAVE” You have now correctly set up your class permissions! 9.4 Update Dashboard Edit the README.md file to add more details to your Workspace Dashboard page. You will use the same function you used to create the Workspace as to update it, with a small change. Instead of create = TRUE you’ll now see an argument update = TRUE. Be very careful to use the correct Workspace name here, so you don’t accidentally overwrite the wrong Workspace. AnVILPublish::as_workspace( path = &quot;/home/rstudio/AnVILPublishSkeleton&quot;, # directory containing DESCRIPTION file namespace = &quot;&lt;billing-project&gt;&quot;, # Billing project name = &quot;&lt;My-Workspace&gt;&quot;, # Actual Workspace name update = TRUE, # Updates the Workspace with your changes use_readme = TRUE # Use README file for Dashboard Description ) You can also click the pencil button next to “ABOUT THE WORKSPACE” to edit the Dashboard manually, but these changes won’t show up later in GitHub. They will also be overwritten by other AnVILPublish updates. 9.5 Post Jupyter Notebook The .Rmd file contains your content. You can make many .Rmd files. These will get turned into .ipynb Jupyter Notebooks when you update using AnVILPublish. After you make changes to your .Rmd files, update the Workspace by running: AnVILPublish::as_workspace( path = &quot;/home/rstudio/AnVILPublishSkeleton&quot;, # directory containing DESCRIPTION file namespace = &quot;&lt;billing-project&gt;&quot;, # Billing project name = &quot;&lt;My-Workspace&gt;&quot;, # Actual Workspace name update = TRUE, # Updates the Workspace with your changes use_readme = TRUE # Use README file for Dashboard Description ) Note that this is the same code used to update the Workspace Dashboard. You can use this exact code to update your workspace any time you save changes in RStudio! 9.6 Push Changes to GitHub Hosting your course’s code on GitHub will ensure that it is reproducible, easy to update, and robust to any tweaks you make. After cloning the skeleton repository, you will need to make a few changes to ensure your content ends up associated with your GitHub account. This means you own it and can make/save changes! Briefly, you should: Create a new repository on GitHub. Don’t add a README.md, .gitignore, or license. Return to RStudio on AnVIL and Initialize your .Rproj. add and commit your changes on AnVIL. rename and add a new origin that points to the new repository you just created. push your changes. Remember that you will need to use a GitHub Personal Token instead of your password. Git can be challenging. Please reach out to our community network at help.anvilproject.org for help. "],["run-class.html", "Chapter 10 Overview 10.1 Checklist and Timeline", " Chapter 10 Overview This section describes how to get your students set up to access AnVIL. These steps will need to be repeated for each new offering of the course. If you are new to AnVIL, we strongly recommend seeking funding through NHGRI / STRIDES for teaching your course. In order to prevent abuse, Google sets certain limits on cloud resources available to new users that can complicate teaching (e.g. project quotas). As you or your institution builds a payment history with Google, the limits on your accounts will be relaxed. In the meantime, STRIDES funding can help ensure your initial classes run smoothly. What is STRIDES? NHGRI’s strategic vision highlights the importance of training the next generation of genomic scientists. In collaboration with the NIH Office of Data Science Strategy, NHGRI makes funding available to AnVIL users through the STRIDES program, which aims to promote biological research in cloud environments. To inquire about funding your class on AnVIL, please contact help@lists.anvilproject.org. Notify Terra In addition to setting up your class, you may want to contact Terra to submit a request for a hold on scheduled maintenance and downtime. Contacting Terra ahead of your class time helps the Terra team avoid any major disruptions to your class. It’s also a good idea to ask about major changes planned for the time prior to your class. 10.1 Checklist and Timeline Here is a checklist to help you keep track of the steps for setting up and teaching on AnVIL. Details about each of these steps can be found in the AnVIL Instructor Guide. Note that this checklist is written for workshop instructors as well as classroom instructors, so some of the “Event Setup” steps may not be applicable to you, depending on your teaching context. Here is a suggested timeframe for working through the checklist: 1+ month before: Figure out how you will fund the class/workshop. Start working through INSTRUCTOR SETUP. It’s a good idea to get billing figured out with plenty of time to spare. Take some time to familiarize yourself with the content and make any desired updates or customizations. Do any necessary EVENT SETUP steps. ~1 week before: Start working through RUNNING THE CLASS. If possible, have students log in to AnVIL and send you their usernames, so you can add them to the Student Group ahead of time. This saves time on the day of the class. Do not add students to your Billing Project ahead of time. This prevents them from accruing costs. Day of (or shortly before): Add students to Billing Project. Have students clone the Workspace (They cannot do this until you have added them to the Billing Project. As soon as they do this, they can start computing.). After: Collect feedback, if you didn’t do it during the class/workshop. Work though EVENT WRAP-UP - until you shut things down, you will continue to accrue costs. "],["set-up-funding.html", "Chapter 11 Set Up Funding 11.1 Create Student Billing Project 11.2 Request Project Quota Increase", " Chapter 11 Set Up Funding Depending on how you are being funded, this may be taken care of for you. If your funding is being managed by a third party (e.g. through a funding mechanism such as STRIDES, or through your institution), contact them to determine whether you should create a Terra Billing Project for your students. Regardless of who is managing funding, it is essential to make sure that you have permission to create enough Workspaces for all of your students! To prevent abuse, new users are only permitted to create a few Workspaces. See Request Quota Increase for more information about how to make sure your students will be able to create Workspaces. 11.1 Create Student Billing Project As a reminder, Terra Billing Projects are how you grant people, including your students, permission to compute on AnVIL. By adding someone to your Billing Project, you enable them to use your funding to carry out activities on AnVIL. You can just add students to the same Billing Project that you are using yourself, but we generally recommend creating a separate Billing Project to fund student activity. This makes it easy to deactivate when the course is over, without freezing your own projects. Note: Terra Billing Projects need unique names. One option is to use a combination of institution-class-role-term (e.g. jhu-bio101-students-2023FA). To create a Terra Billing Project: Launch Terra and sign in with your Google account. If this is your first time logging in to Terra, you will need to accept the Terms of Service. In the drop-down menu on the left, navigate to “Billing”. Click the triple bar in the top left corner to access the menu. Click the arrow next to your name to expand the menu, then click “Billing”. You can also navigate there directly with this link: https://anvil.terra.bio/#billing On the Billing page, click the “+ CREATE” button to create a new Billing Project. Select GCP Billing Project (Google’s Platform). If prompted, select the Google account to use and give Terra permission to manage Google Cloud Platform billing accounts. Enter a unique name for your Terra Billing Project and select the appropriate Google Billing Account. The name of the Terra Billing Project must: Only contain lowercase letters, numbers and hyphens Start with a lowercase letter Not end with a hyphen Be between 6 and 30 characters Select the Google Billing Account to use. All activities conducted under your new Terra Billing Project will charge to this Google Billing Account. If prompted, give Terra permission to manage Google Cloud Platform billing accounts. Click “Create”. Your new Billing Project should now show up in the list of Billing Projects Owned by You. You can add additional members or can modify or deactivate the Billing Project at any time by clicking on its name in this list. The page doesn’t always update as soon as the Billing Project is created. If it’s been a couple of minutes and you don’t see a change, try refreshing the page. Reminder: It’s often a good idea to add at least one other Owner of a Billing Project in order to avoid getting locked out, in case the original owner loses access to their account. See the section on adding instructors to a billing project if you need a reminder on how to do this. 11.2 Request Project Quota Increase To prevent abuse, new users are only permitted to create a few Workspaces. If each of your students needs their own Workspace (e.g. they each clone their own copy of a Workspace), you will quickly run into this limit and students will not be able to clone or create new Workspaces. This limit is imposed by Google, rather than Terra (Google only permits you to create a few Google Cloud “Projects”, and each Terra Workspace is a Google Cloud Project), so you will need to contact Google directly to request a “billing quota increase”, using this form. This should be done by the owner of the Google Billing Account. If you set up billing yourself, this is you; otherwise talk to your funding provider and make sure that you have enough Google Cloud Projects available for all your students (typically one per student, unless students need multiple Workspaces). At the time of writing (Feb 2023) Terra is working to expedite this process for Terra users; we recommend checking the relevant Terra documentation for the latest information as well as recommendations about how to fill out the form. In our experience, the process has been reasonably straightforward and quick (approved in a couple of days). "],["set-up-student-accounts.html", "Chapter 12 Set Up Student Accounts 12.1 Create Student Group 12.2 Have Students Create Accounts 12.3 Add Students to Group 12.4 Add Student Group to Workspace", " Chapter 12 Set Up Student Accounts In order for your students to compute on AnVIL, they will need to set up an account and provide you with their username so that you can grant them access to resources (Billing Projects and Workspaces). If possible, it can be helpful to do this ahead of time, so that you do not need to dedicate class time for it. Make sure you understand when and where your students can spend money! The following actions will give your students the ability to spend money on AnVIL: Adding them to a Billing Project - this will let them create their own Workspaces Adding them as Writers or Owners to a Workspace - this will let them compute in the Workspace Our recommendation is to do most set up ahead of time: Create Student Group (and add Instructors) Have students create accounts (and collect usernames) Add students to the Student Group Give the Student Group access to any Workspaces as Readers. This will let them view the contents but not spend money. Wait until shortly before the students need to compute to add the Student Group to the Billing Project. This prevents them from accruing costs on your Billing Project without your guidance. This chapter walks through all of the student setup steps that can safely be done ahead of time. The final step for activating student billing is covered in the next chapter. 12.1 Create Student Group Creating a Group for your students will let you easily manage the class as a whole by granting the Group access to Billing Projects and Workspaces. You will need a unique name for your Group. We suggest a combination of institution-class-role-term (e.g., jhu-bio101-students-2023FA). Only letters, numbers, underscores, and dashes are allowed in Group names. To create a Group: Launch Terra and sign in with your Google account. In the drop-down menu on the left, navigate to “Groups”. Click the triple bar in the top left corner to access the menu. Click the arrow next to your name to expand the menu, then click “Groups”. You can also navigate there directly with this link: https://anvil.terra.bio/#groups Click “+ Create a New Group” Enter a name for your group. Names must be unique, so it’s often helpful to include your team’s name, the purpose of the group, and optionally the timeframe, if you will have similar groups in the future. Click “CREATE GROUP” Your new Group should now show up on the Group Management screen. Take note of the email address associated with your group. You will use this email to grant the group access to Billing Projects and Workspaces. You now have a unique Student Group. 12.1.1 Add Instructors to Group Now that your student Group has been created, you should add any additional instructors / course coordinators as Admins. This will give them permission to add and remove students, in case you are unavailable. If you created an instructor Group, you can instead add the Instructor Group as an Admin of the Student Group. This will enable everyone in the Instructor Group to act as an Admin for the Student Group. To do this, you will need the email address associated with the Instructor Group, which can be found on the Group management page: https://anvil.terra.bio/#groups. The following instructions explain how to add someone to a Terra Group. You will want to add instructors to the Student Group as Admins. Launch Terra and sign in with your Google account. In the drop-down menu on the left, navigate to “Groups”. Click the triple bar in the top left corner to access the menu. Click the arrow next to your name to expand the menu, then click “Groups”. You can also navigate there directly with this link: https://anvil.terra.bio/#groups Find the name of the Group you want to add someone to, and confirm that you have Admin privileges for the Group (you can only add and remove members to a Group if you are an Admin). Click on the name of the Group to view and manage members. Click on “+ Add User”. You will be prompted to enter the user’s AnVIL ID. Type in the user’s email address. Make sure this is the account that they will be using to access AnVIL. If this member will need to add and remove other members of the Group, check the box for “Can manage members (admin)”. This will add them as an “Admin” for the Group. Otherwise leave it unchecked, and they will be added as a “Member”. Admins and Members have equal access to any resources shared with the Group. Admins can manage Group membership - they can add, remove, or change the role of other Group members. Click ADD USER. This will take you back to the Group administration page. The new Group member will now be shown in the list of group members, along with their role. They should now have access to anything that the Group has been given access to. If you need to remove members or modify their roles, you can do so at any time by clicking the teardrop button next to their name. 12.2 Have Students Create Accounts Each of your students will need to: Create a Google account, if they do not already have one Sign in to Terra Provide you with their username, so that you can add them to your Student Group Student-facing instructions for account creation (and several other activities) are provided in the Student Instructions section. 12.3 Add Students to Group Once your students have accounts, you will need to add them to your Student Group as Members. In order to add students to your Group, you will need the usernames for the Google accounts your students are using to access AnVIL. Unfortunately there is currently no way to add members to a Group in bulk, so you will need to add students to the Group one-by-one. The following instructions explain how to add someone to a Terra Group. You will want to add students to the Group as Members. Launch Terra and sign in with your Google account. In the drop-down menu on the left, navigate to “Groups”. Click the triple bar in the top left corner to access the menu. Click the arrow next to your name to expand the menu, then click “Groups”. You can also navigate there directly with this link: https://anvil.terra.bio/#groups Find the name of the Group you want to add someone to, and confirm that you have Admin privileges for the Group (you can only add and remove members to a Group if you are an Admin). Click on the name of the Group to view and manage members. Click on “+ Add User”. You will be prompted to enter the user’s AnVIL ID. Type in the user’s email address. Make sure this is the account that they will be using to access AnVIL. If this member will need to add and remove other members of the Group, check the box for “Can manage members (admin)”. This will add them as an “Admin” for the Group. Otherwise leave it unchecked, and they will be added as a “Member”. Admins and Members have equal access to any resources shared with the Group. Admins can manage Group membership - they can add, remove, or change the role of other Group members. Click ADD USER. This will take you back to the Group administration page. The new Group member will now be shown in the list of group members, along with their role. They should now have access to anything that the Group has been given access to. If you need to remove members or modify their roles, you can do so at any time by clicking the teardrop button next to their name. 12.4 Add Student Group to Workspace Now that you have added students to the Group, you can easily share Terra resources with the entire Group. First, you will need to give your Student Group access to any Workspaces that they will need. If you are using a Public Workspace (some content uses Public Workspaces), you can skip this step - Public Workspaces are automatically available to everyone on AnVIL. If you have Workspaces of your own that your students will need to access, you should add the Student Group to your Workspace(s) as a Reader. Adding students as a Reader gives them permission to view the Workspace, and (once they have funding) to clone their own copy. This will enable them to work safely in their own space without interfering with each other or overwriting anything in the original Workspace. Adding students to your Workspace(s) can safely be done ahead of time; as Readers they can’t run computations and run up a bill. Adding the Student Group to a Workspace will give all members of the Group access to the Workspace in one easy step. To add the Student Group to a Workspace, you will need the Group email address, which can be found on the Group management page: https://anvil.terra.bio/#groups The following instructions explain how to add users to a Terra Workspace. You will want to add the Student Group to the Workspace as Reader. Launch Terra In the drop-down menu on the left, navigate to “Workspaces”. Click the triple bar in the top left corner to access the menu. Click “Workspaces”. Click on the name of the Workspace to open the Workspace. Opening a Workspace does not cost anything. Certain activities in the Workspace (such as running an analysis) will charge to the Workspace’s Billing Project. Workspace management (e.g. adding and removing members, editing the description) does not cost money. Click the teardrop button () on the right hand side to open the Workspace management menu. Click “Share” Enter the email address of the user or Group you’d like to share the Workspace with. If adding an individual, make sure to enter the account that they use to access AnVIL. If adding a Terra Group, use the Group email address, which can be found on the Terra Group management page. Choose their permission level. Remember that all activity in the Workspace will be charged to the Workspace’s Billing Project, regardless of who conducts it, so only add members as “Writers” or “Owners” if they should be charging to the Workspace’s Billing Project. “Readers” can view all parts of the Workspace but cannot make edits or run analyses (i.e. they cannot spend money). They can also clone their own copy of the Workspace where they can conduct activity on their own Billing Project. Click “Save”. The user should now be able to see the Workspace when logged in to Terra. Make sure the newly added Student Group displays “Reader” under “Roles”. "],["teach-the-class.html", "Chapter 13 Teach the Class 13.1 Before: Add Student Group to Billing Project 13.2 Before: Direct Students to Clone Workspace 13.3 After: Instruct Students on Shutdown 13.4 After: Collect Feedback", " Chapter 13 Teach the Class This chapter covers things that you will generally do on the day of the class: Before class Add students to Billing Project Direct students to clone the Workspace (this can be done in the first few minutes of class) After class Give students any necessary instructions on how to save and export any important files, and how to pause or delete their cloud environments Collect feedback 13.1 Before: Add Student Group to Billing Project When you are ready for your students to start computing, you should add the Student Group to your Billing Project. This will enable everyone in the Group to clone or create Workspaces funded by the Billing Project. Everything they do in those Workspaces will be charged to your Billing Project. We generally recommend waiting until shortly before the class to add students to the Billing Project, to prevent them from starting something up early and accruing costs. However, if you did not create the Terra Billing Project for your class, you should make sure that either you have been given “Owner” permission for the class Billing Project (so you can add students yourself), or that someone who does is prepared to add students in time for your class to start. To add members to a Billing Project, you must be an “Owner” of the Billing Project. If you created the Billing Project yourself, you’re good to go! If a third party created the Billing Project, check to see whether you are an Owner or a User. If you are not an Owner, you will need to contact your funding manager. They can either make you an Owner, or can add the Student Group to the Billing Project themselves. To add the Student Group to the Workspace, you will need the Group email address, which can be found on the Group management page: https://anvil.terra.bio/#groups The following instructions explain how to add someone to a Terra Billing Project. You will want to add the Student Group to the Billing Project as a User. Launch Terra and sign in with your Google account. In the drop-down menu on the left, navigate to “Billing”. Click the triple bar in the top left corner to access the menu. Click the arrow next to your name to expand the menu, then click “Billing”. You can also navigate there directly with this link: https://anvil.terra.bio/#billing Click “Owned by You” and find the Billing Project. If you do not see the Billing Project in this list, then you are not an Owner and do not have permission to add members. Click on the name of the Billing Project. Click on the “Members” tab to view and manage members. Then click the “Add User” button. Enter the email address of the user or group you’d like to add the the Billing Project. If adding an individual, make sure to enter the account that they use to access AnVIL. If adding a Terra Group, use the Group email address, which can be found on the Terra Group management page. If this user or group will need to add and remove other users of the Billing Project, check the Owner box. Otherwise leave it unchecked. It’s often a good idea to have at least one other Owner of a Billing Project in order to avoid getting locked out, in case the original owner leaves or loses access to their account. Click “ADD USER”. You should now see the user or group listed in the Billing Project members, along with the appropriate role. They should now be able to use the Billing Project to fund work on AnVIL. If you need to remove members or modify their roles, you can do so at any time by clicking the teardrop button next to their name. Make sure the newly added Student Group displays “User” under “Roles”. 13.2 Before: Direct Students to Clone Workspace Your students will each need to clone their own copy of the class Workspace. We typically have students clone the Workspace in the first few minutes of class. This both helps ensure they won’t start up their cloud environments early, and ensures they get the most up-to-date version of the Workspace. Student-facing instructions for how to clone a Workspace are provided in the Student Instructions section. You will need to provide your students with a link to the Workspace they will be cloning, and the name of the Billing Project they should use. 13.3 After: Instruct Students on Shutdown If your students will not be doing any more work in this Workspace, have students export any files they wish to keep. Once you disable Billing, they (and you) will lose access to files in the Workspace. If your students will continue using the Workspace in a subsequent class or for homework, have them pause or delete the cloud environment to minimize charges accrued while they are not working. 13.4 After: Collect Feedback If you are using one of the premade courses, we would appreciate feedback! If you are willing to ask your students to provide feedback, please direct them to this form: https://forms.gle/6X77RKnbKPVG5qMn6 Responses are anonymous. We would also greatly appreciate feedback from you as the instructor! Comments can be submitted through the same form, or if you are comfortable on GitHub you can open an issue in the corresponding repository. "],["shutting-down.html", "Chapter 14 Shutting Down", " Chapter 14 Shutting Down Once your students are done working, you will want to deactivate the Billing Project. It is essential to disable the Billing Project, not just remove students from it! Removing students from the Billing Project will prevent them from making new Workspaces, but will not stop them from computing in Workspaces that already exist. You will continue to accrue costs for any storage and cloud environments until you disable the Billing Project. Disabling the Billing Project makes the Workspace contents inaccessible! You will be unable to access any data stored in the Workspace or cloud environment. It is sometimes possible to restore access by reactivating billing, but Google makes no promises about whether the data will be recoverable. Make sure you and your students have saved anything you want to keep in another location before disabling billing for your class. Launch Terra and sign in with your Google account. In the drop-down menu on the left, navigate to “Billing”. Click the triple bar in the top left corner to access the menu. Click the arrow next to your name to expand the menu, then click “Billing”. You can also navigate there directly with this link: https://anvil.terra.bio/#billing Click “Owned by You” and find the Billing Project. If you do not see the Billing Project in this list, then you are not an Owner and do not have permission to add members. Click on the name of the Billing Project. If you don’t see information about the Billing Account, click on “View billing account” to expand the Billing Account information. You may be prompted to enter your login information again. You should see the name of the Google Billing Account that is funding this Terra Billing Project. Click on the teardrop icon next to the name of the Billing Account. Click “Remove Billing Account”. Click OK to confirm that you want to disable funding for this Billing Project. The page should now indicate that there is no linked billing account. If necessary, you can restore funding to the Billing Project and associated Workspaces by clicking the teardrop icon and selecting “Change Billing Account”. However, Google makes no promises about how long the Workspace contents will remain available after you disable funding, so it is best not to rely on them. "],["understanding-anvil-billing.html", "Chapter 15 Understanding AnVIL Billing 15.1 Types of costs 15.2 Estimating costs before the class begins", " Chapter 15 Understanding AnVIL Billing The following chapters will help you understand and estimate the cost of running a class on AnVIL. This section is under revision. 15.1 Types of costs Costs in AnVIL fall into one of three categories: compute costs, storage costs, and network usage (egress) costs. Compute costs are those that students accrue when actively using an AnVIL Workspace. Students can clone a Workspace for no cost, but they will begin to accrue costs as soon as they set up a cloud environment. Compute costs are based on how many CPUs you need, as well as how much memory and storage space you choose. You can also pause the Workspace and pay a lower cost per hour than if you were to keep the Workspace running. Current prices can be found here. Storage costs are driven by the persistent disk. The persistent disk allows you to store data and installed programs/libraries for a low cost. Students can delete their Workspaces but maintain their persistent disk so they still have access to previous programs they have installed and previous files they’ve created. Current prices can be found here. Finally, network usage costs are those involved with transferring data between networks or downloading data from the cloud to your local computer. Current prices can be found here. 15.2 Estimating costs before the class begins AnVIL has a free AnVIL_Cost_Estimator that allows you estimate compute, storage, and network usage costs for your class. This is a Google sheet that you can tailor to fit your needs. Before you use it, make sure the prices are up to date by following the links at the bottom of the sheet. If you need to create a Budget Justification for your class, you can also use the free AnVIL_Budget_Justification template. "],["how-much-does-a-class-cost.html", "Chapter 16 How much does a class cost? 16.1 Funding sources", " Chapter 16 How much does a class cost? One of the advantages of billing projects in Terra is that you can keep track of the costs during real time. You can see how much each Workspace is costing while your course is happening, so there are no unexpected surprises at the end! Full details about billing in Terra can be found here. These instructions are adapted from Terra Support. To view the costs being accrued by each billing project, you can go to https://console.cloud.google.com/billing. At the top of the page, there is a dropdown menu. Choose the billing project name you’d like to view. Once you are in proper billing project, you click on “View detailed charges” in the Billing section on the far right. This takes you to a report of the detailed charges accrued by the billing account. Here, you will be able to see the total cost over a time range, as well as costs broken down by services. 16.1 Funding sources NHGRI STRIDES {#strides-funding} Through the STRIDES program, NHGRI makes funding available to new users of the AnVIL, in collaboration with the NIH Office of Data Science Strategy. NHGRI currently supports the AnVIL Cloud Credits Program (AC2) and will have a second round of funding available in fall of 2021. "],["student-instructions.html", "Chapter 17 Overview", " Chapter 17 Overview The chapters in this section are aimed at students and provide instructions on how to sign up and access materials on AnVIL. If you are doing an activity from the GDSCN or AnVIL collections, there may be more specific student instructions available in those books. Otherwise, the instructions below should be sufficient for most courses. "],["student-account-setup.html", "Chapter 18 Setup AnVIL Account", " Chapter 18 Setup AnVIL Account The following instructions will walk you through setting up an AnVIL account so that you can carry out data analysis in the cloud. In order to run your analyses, you will use the AnVIL cloud computing platform. The AnVIL (Analysis Visualization and Informatics Lab-space) platform is specially designed for analyzing biological data, and is used by scientists doing all sorts of biological research. AnVIL in a nutshell Behind the scenes, AnVIL relies on Google Cloud Platform to provide computing infrastructure. Basically, AnVIL lets you “rent” computers through the internet. The analysis is run on the rented computer. AnVIL lets you see the results in your browser. AnVIL uses Terra to provide many computational tools useful for biological data analysis, such as RStudio, Galaxy, and Jupyter Notebooks. Terra takes care of installing these tools so you can use them right away. 18.0.1 Create Google Account First, you will need to set up a (free) Google account. A Google account usually looks like “myname@gmail.com”. Alternatively, you can enable Google for an existing non-Gmail email address using these instructions. If you do not already have a Google account that you would like to use for accessing AnVIL, create one now. 18.0.2 Log In to Terra Next, make sure you can log in to Terra – you will use Terra to perform computations on AnVIL. You can access Terra by going to anvil.terra.bio. Open Terra, and you should be prompted to sign in with your Google account. 18.0.3 Share Username Make sure your instructor has your Google account username (e.g. myname@gmail.com), so they can give you access to everything you need. Make sure there are no typos! If you have multiple Google accounts, make sure you give them the username that you will be using to log in to anvil.terra.bio. It is very important that you share the Google account you will be using to access AnVIL with with your instructor! Otherwise, the instructor cannot add you to Billing Projects or Workspaces, and you will be unable to proceed with your assignments. "],["student-clone-workspace.html", "Chapter 19 Access Materials", " Chapter 19 Access Materials The following instructions will show you how to access materials (tools and data) on AnVIL. This will not work until your instructor has given you permission to spend money to “rent” the computers that will power your analyses (by adding you to a “Billing Project”). On AnVIL, you access files and computers through Workspaces. Each Workspace functions almost like a mini code laboratory - it is a place where data can be examined, stored, and analyzed. The first thing we want to do is to copy or “clone” a Workspace to create a space for you to experiment. This will give you access to the files you will need (data, code) the computing environment you will use Tip At this point, it might make things easier to open up a new window in your browser and split your screen. That way, you can follow along with this guide on one side and execute the steps on the other. To clone an AnVIL Workspace: Open Terra - use a web browser to go to anvil.terra.bio In the drop-down menu on the left, navigate to “Workspaces”. Click the triple bar in the top left corner to access the menu. Click “Workspaces”. You are automatically directed to the “MY WORKSPACES” tab. Here you can see any Workspaces that have been shared with you, along with your permission level. Depending on how your instructor has set things up, you may or may not see any Workspaces in this tab. Locate the Workspace specified by your instructor. (The images below show the SARS-CoV-2-Genome Workspace as an example, but you should look for the Workspace specified by your instructor.) If it has been shared with you ahead of time, it will appear in “MY WORKSPACES”. Otherwise, select the “PUBLIC” tab. In the top search bar, type the Workspace name specified by your instructor. You can also go directly to the Workspace by clicking this link: ask your instructor. Clone the workspace by clicking the teardrop button (). Select “Clone”. Or, if you have opened the Workspace, you can find the teardrop button on the top right of the Workspace. You will see a popup box appear, asking you to configure your Workspace Give your Workspace clone a name by adding an underscore (“_“) and your name. For example, \"ExampleWorkspace_Firstname_Lastname\". Select the Billing Project provided by your instructor. Leave the bottom two boxes as-is. Click “CLONE WORKSPACE”. The new Workspace should now show up under “MY WORKSPACES”. You now have your own copy of the Workspace to work in. "],["start-galaxy.html", "Chapter 20 Start Galaxy", " Chapter 20 Start Galaxy Coming soon! "],["student-start-RStudio.html", "Chapter 21 Start RStudio 21.1 Start RStudio", " Chapter 21 Start RStudio Pause here if you are not going to start working right away. Once you start up RStudio, it will cost money to keep it running. It costs a few cents an hour, so it’s quite cheap as long as you use it responsibly. But it can add up if you leave it running for days or weeks when you don’t need it. 21.1 Start RStudio AnVIL is very versatile and can scale up to use very powerful cloud computers. It’s very important that you select the cloud computing environment described here to avoid runaway costs. Open Terra - use a web browser to go to anvil.terra.bio In the drop-down menu on the left, navigate to “Workspaces”. Click the triple bar in the top left corner to access the menu. Click “Workspaces”. Click on the name of your Workspace. You should be routed to a link that looks like: https://anvil.terra.bio/#workspaces/&lt;billing-project&gt;/&lt;workspace-name&gt;. Click on the cloud icon on the far right to access your Cloud Environment options. If you don’t see this icon, you may need to scroll to the right. In the dialogue box, click the “Settings” button under RStudio. You will see some configuration options for the RStudio cloud environment, and a list of costs because it costs a small amount of money to use cloud computing. Leave everything else as-is. To create your RStudio Cloud Environment, scroll down and click the “CREATE” button. The dialogue box will close and you will be returned to your Workspace. You can see the status of your cloud environment by hovering over the RStudio icon. It will take a few minutes for Terra to request computers and install software. When your environment is ready, its status will change to “Running”. Click on the RStudio logo to open a new dialogue box that will let you launch RStudio. Click the launch icon to open RStudio. This is also where you can pause, modify, or delete your environment when needed. You should now see the RStudio interface with information about the version printed to the console. "],["give-us-feedback.html", "Chapter 22 Give us Feedback", " Chapter 22 Give us Feedback Thank you for your interest in this book! There are a few ways you can suggest improvements: Fill out this Google form. If you have a GitHub account, you can raise an issue in our repository. Submit a pull request! Click the pencil icon on any page (top left) to view the source .Rmd for the page and suggest changes. "],["about-the-authors.html", "About the Authors", " About the Authors These credits are based on our course contributors table guidelines. Credits Names Lead Content Instructor Ava Hoffman Additional Content and Formatting Elizabeth Humphries Template Publishing Engineer Candace Savonen, Carrie Wright Publishing Maintenance Engineer Candace Savonen Technical Publishing Stylist Carrie Wright, Candace Savonen Packages John Muschelli, Candace Savonen, Carrie Wright "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
